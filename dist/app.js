'use strict';function F(){return{X:[["",0],["Jacks or Better Pair",1],["Two Pair",2],["Three of a Kind",3],["Straight",4],["Flush",6],["Full House",9],["Four of a Kind",12],["Straight Flush",15],["Royal Flush",18]],L:"23456789tjqka".split(""),ha:["s","h","c","d"],T:{s:"#1F191B",c:"#1F191B",h:"#CB1728",d:"#CB1728"},ga:{as:"\ud83c\udca1",ah:"\ud83c\udcb1",ad:"\ud83c\udcc1",ac:"\ud83c\udcd1","2s":"\ud83c\udca2","2h":"\ud83c\udcb2","2d":"\ud83c\udcc2","2c":"\ud83c\udcd2","3s":"\ud83c\udca3","3h":"\ud83c\udcb3",
"3d":"\ud83c\udcc3","3c":"\ud83c\udcd3","4s":"\ud83c\udca4","4h":"\ud83c\udcb4","4d":"\ud83c\udcc4","4c":"\ud83c\udcd4","5s":"\ud83c\udca5","5h":"\ud83c\udcb5","5d":"\ud83c\udcc5","5c":"\ud83c\udcd5","6s":"\ud83c\udca6","6h":"\ud83c\udcb6","6d":"\ud83c\udcc6","6c":"\ud83c\udcd6","7s":"\ud83c\udca7","7h":"\ud83c\udcb7","7d":"\ud83c\udcc7","7c":"\ud83c\udcd7","8s":"\ud83c\udca8","8h":"\ud83c\udcb8","8d":"\ud83c\udcc8","8c":"\ud83c\udcd8","9s":"\ud83c\udca9","9h":"\ud83c\udcb9","9d":"\ud83c\udcc9","9c":"\ud83c\udcd9",
ts:"\ud83c\udcaa",th:"\ud83c\udcba",td:"\ud83c\udcca",tc:"\ud83c\udcda",js:"\ud83c\udcab",jh:"\ud83c\udcbb",jd:"\ud83c\udccb",jc:"\ud83c\udcdb",qs:"\ud83c\udcad",qh:"\ud83c\udcbd",qd:"\ud83c\udccd",qc:"\ud83c\udcdd",ks:"\ud83c\udcae",kh:"\ud83c\udcbe",kd:"\ud83c\udcce",kc:"\ud83c\udcde"}}};CanvasRenderingContext2D.prototype.M=function(k,d,e,a,b){e<2*b&&(b=e/2);a<2*b&&(b=a/2);this.beginPath();this.moveTo(k+b,d);this.arcTo(k+e,d,k+e,d+a,b);this.arcTo(k+e,d+a,k,d+a,b);this.arcTo(k,d+a,k,d,b);this.arcTo(k,d,k+e,d,b);this.closePath()};
const I=G(),S=function(k){function d(){w=k.subscribe(c);l.G(!0)}function e(){t.a(`BALANCE ${f}`);const m=f-404;C.ea(14<m?14:0<m?m:0)}function a(){if(x)if(w(),l.G(!1),404===f)console.log("balance not found"),h.stop();else{x=!1;y=[];--f;v=J();var m=v.I(5);n.da(m,r).then(d);r&&(r=!1);e();q.a("");u.a("");l.a("SUBMIT")}else{w();l.G(!1);g();{m=n.W();const [A,z]=K(m);m=f+z;f=418<m?418:m;e();q.a(A);z?u.a(`Win ${z}`):u.a("Better luck next time");418===f?(console.log("you win"),h.stop()):b()}}}function b(){x=
!0;d();l.a("PLACE A BET")}function p(m){-1===y.indexOf(m)&&(l.a("DEAL AND SUBMIT"),y.push(m),n.ca(m))}function g(){if(y.length){const m=v.I(y.length),A=y.map((z,D)=>[z,m[D]]);n.ba(A)}}function c(m){!x&&m.Z&&0<m.A&&6>m.A?p(m.A-1):m.aa&&a()}const h=M(function(m){const A=m.g,z=m.m,D=m.H,E=m.Y,H=m.J,L=m.K;t.setPosition(m.l/2,m.P);t.j(H);u.setPosition(D+z-A,E);u.j(L);q.setPosition(z,E);q.j(L)}),n=N(function(m){!x&&0<=m&&5>m&&p(m)}),t=O({fill:"white",fontFamily:"Fredoka One"}),u=O({fill:"white",textAlign:"right"}),
q=O({fill:"white",textAlign:"left"}),l=P(a);let f=411,r=!0,v,y,x,w,C,B;return{B:function(m,A){C=Q(m,A);B=R(m,A);h.add(n,t,u,q,l,C,B);n.B();l.a("PLACE A BET");e();b();h.start()}}}(I),T=function(){const k=document.querySelector(".help-outer");let d=!0;return{toggle:function(){d=!d;k.style.display=d?"table":"none"}}}();let U=!1;const V=new Image;V.onload=W;V.src="assets/teapot_y.svg";const X=new Image;X.onload=W;X.src="assets/teapot_p.svg";
function W(){U?(I.subscribe(Y),setTimeout(()=>{S.B(V,X)},0)):U=!0}function Y(k){k.isEscape&&T.toggle()};function G(){function k(g){const c=Number(g.key),h={};" "===g.key?h.aa=!0:Number.isInteger(c)?(h.A=c,h.Z=!0):h[`is${g.key}`]=!0;b.forEach(n=>{a[n](h)})}function d(g){p=g.timeStamp}function e(g){if(1E3<g.timeStamp-p){const c={ja:!0};b.forEach(h=>{a[h](c)})}}let a={},b=[],p;"ontouchstart"in window?(window.addEventListener("touchstart",d),window.addEventListener("touchend",e)):window.addEventListener("keyup",k);return{subscribe:function(g){const c=Date.now();a[c]=g;b=Object.keys(a);return function(){delete a[c];
b=Object.keys(a)}},reset:function(){a={};b=[]}}};function M(k){function d(){c.width=window.innerWidth;c.height=window.innerHeight;h.textAlign="center";h.textBaseline="middle";h.lineJoin="round";const f=c.width>c.height,r=c.width,v=c.height,y=.8*v;var x=.6;let w=Math.round(v*x),C=Math.round(.66*w),B=Math.round(.06*w),m=5*(C+B);const A=.2*v,z=Math.round(.045*v),D=Math.round(.75*z);for(console.log({J:z,K:D});m>r;)x-=.05,w=Math.round(v*x),C=Math.round(.66*w),B=Math.round(.06*w),m=5*(C+B);x=(v-w)/2;const E={l:r,ch:v,u:w,v:C,g:B,H:m,m:(r-m+B)/2,o:x,P:A,
S:y,Y:x-1.5*B,R:Math.round(w*(f?.2:.4)),J:z,K:D};q.forEach(H=>H.f(E));k(E)}function e(f){const r=a(f);u.forEach(v=>v(r))}function a(f){const r=c.getBoundingClientRect();return{x:f.pageX-r.left,y:f.pageY-r.top}}function b(f){l&&(p(f),h.clearRect(0,0,c.width,c.height),g());requestAnimationFrame(b)}function p(f){t.forEach(r=>r.update(f))}function g(){n.forEach(f=>f.b(h))}const c=document.querySelector("canvas"),h=c.getContext("2d");let n=[],t=[],u=[],q=[],l=!1;c.addEventListener("touchstart",e);c.addEventListener("click",
e);window.addEventListener("resize",d);c.width=window.innerWidth;c.height=window.innerHeight;h.textAlign="center";h.textBaseline="middle";h.lineJoin="round";requestAnimationFrame(b);return{ia:function(){return[c.width,c.height]},add:function(...f){f.forEach(r=>{n.push(r);"function"===typeof r.C&&u.push(r.C);"function"===typeof r.update&&t.push(r);"function"===typeof r.f&&q.push(r)})},start:function(){d();l=!0},stop:function(){l=!1}}};function J(){const {ha:k,L:d}=F(),e=k.reduce((a,b)=>{const p=d.map(g=>{{const {ga:c,L:h,T:n}=F();g={D:g,N:b,value:h.indexOf(g),fa:c[g+b],color:n[b]}}return g});return[...a,...p]},[]);for(let a=e.length-1;0<a;a--){const b=Math.floor(Math.random()*(a+1));[e[a],e[b]]=[e[b],e[a]]}return{I:function(a){return e.splice(-1*a)}}};function K(k){const {X:d}=F(),e=[...k].sort(function(c,h){return c.value<h.value?1:c.value>h.value?-1:0});let a=!0,b=!0;const p=e.reduce((c,h,n)=>{a&&0!==n&&(a=h.value===e[n-1].value-1);b&&0!==n&&(b=h.N===e[n-1].N);c[h.D]?c[h.D].push(h):c[h.D]=[h];return c},{});k=d[0];var g=b&&a;g&&p.O&&1===p.O.length?k=d[9]:g?k=d[8]:b?k=d[5]:a?k=d[4]:(g=Object.keys(p).reduce((c,h)=>{c[p[h].length].push(p[h]);return c},{1:[],2:[],3:[],4:[]}),1===g["4"].length?k=d[7]:1===g["2"].length&&1===g["3"].length?k=d[6]:1===
g["3"].length?k=d[3]:2===g["2"].length?k=d[2]:1===g["2"].length&&g["2"][0].every(c=>8<c.value)&&(k=d[1]));return k};function P(k){function d(q,l,f){return q>=Math.min(l,f)&&q<=Math.max(l,f)}let e=!1,a,b,p,g,c,h,n,t,u="";return{b:function(q){q.save();q.fillStyle="#C35B68";q.M(a,b,c,h,n);q.fill();q.fillStyle="#DCB600";q.font=`${t}px "Fredoka One"`;q.fillText(u,p,g);q.restore()},a:function(q){u=q},C:function(q){var l;if(l=e)l=d(q.x,a,a+c)&&d(q.y,b,b+h);l&&k()},G:function(q){e=q},f:function({m:q,S:l,R:f,l:r,H:v,g:y}){a=q;b=l;p=r/2;g=l+f/2;c=v-y;h=f;n=Math.round(.1*h);t=Math.round(.66*h)}}};function N(k){let d=[];return{b:function(e){d.forEach(a=>a.b(e))},ca:function(e){d[e].i(.16)},ba:function(e){e.forEach(([a,b])=>{d[a].F(b);d[a].i(.16)})},W:function(){return d.map(e=>e.V())},da:function(e,a){if(a)return d.reduce((b,p,g)=>b.then(()=>{p.F(e[g]);return p.i(.24)}),Promise.resolve());a=d.map((b,p)=>{b.F(e[p]);return b.i(.16)});return Promise.all(a).then(()=>d.reduce((b,p)=>b.then(()=>p.i(.24)),Promise.resolve()))},B:function(){d=Array.from({length:5},()=>Z())},C:function(e){let a=0;for(;5>
a&&!d[a].$(e);a++);k(a)},update:function(){d.forEach(e=>e.update())},f:function({u:e,v:a,g:b,m:p,o:g}){d.forEach((c,h)=>{c.f({U:p+h*(a+b),u:e,v:a,g:b,o:g})})}}};function Z(){function k(l,f,r){return l>=Math.min(f,r)&&l<=Math.max(f,r)}let d,e,a,b,p,g,c,h=!0,n=!1,t=1,u=-.16,q=()=>{};return{b:function(l){l.save();const f=b/2;l.translate(e+f,a);l.scale(t,1);l.fillStyle="white";l.M(-1*f,0,b,p-c,c);l.fill();l.font=`${p}px sans-serif`;l.textBaseline="top";l.textAlign="left";l.fillStyle=h?"#DCB600":d.color;l.fillText(h?"\ud83c\udcbf":d.fa,-1*f,g);l.restore()},i:function(l){u=-1*l;n=!0;return new Promise(f=>{q=f})},F:function(l){d=l},V:function(){return d},$:function(l){return k(l.x,
e,e+b)&&k(l.y,a,a+p)},update:function(){n&&(t+=u,0>=t?(t=0,u*=-1,h=!h):1<=t&&(t=1,u*=-1,n=!1,q()))},f:function({U:l,u:f,v:r,g:v,o:y}){a=y;e=l;b=r;p=f;g=v;c=g/2}}};function R(k,d){function e(f){u=!0;if(t=f)q.a("You are a Teapot."),l.a("You won.")}let a,b,p,g,c,h,n,t=!1,u=!1;const q=O({fill:"white"});q.a("Balance Not Found.");q.j(42);const l=O({fill:"white"});l.a("You lose");l.j(42);e(!0);return{b:function(f){u&&(f.save(),f.fillStyle="#668706",f.fillRect(0,0,p,g),f.save(),f.translate(h,n),f.scale(c,c),f.drawImage(t?k:d,0,0),f.restore(),q.b(f),l.b(f),f.restore())},show:e,f:function({l:f,ch:r}){c=1;const v=Math.min(f,r);p=f;g=r;a=k.width*c;for(b=k.height*c;a>1.08*
v;)c-=.002,a=k.width*c,b=k.height*c;h=(f-a)/2;n=(r-b)/2;q.setPosition(f/2,r/2);l.setPosition(f/2,r/2+42)}}};function Q(k,d){let e,a,b,p;return{b:function(g){g.save();g.scale(b,b);for(let c=0;14>c;c++)g.drawImage(c<e?k:d,(a*c+(a/2-p/2))/b,0);g.restore()},ea:function(g){e=g},f:function({l:g}){a=g/14;b=.06;for(p=k.width*b;p>a;)b-=.002,p=k.width*b}}};function O(k){let d="",e,a,b,{fill:p,stroke:g,textAlign:c,fontFamily:h="system"}=k;return{b:function(n){n.save();n.font=`${b}px ${h}`;n.fillStyle=p;c&&(n.textAlign=c);n.fillText(d,e,a);g&&(n.strokeStyle=g,n.strokeText(d,e,a));n.restore()},a:function(n){d=n},setPosition:function(n,t){e=n;a=t},j:function(n){b=n},ka:function(){}}};
