'use strict';function l(){return{D:[["Lose",0],["Jacks or Better",1],["Two Pair",2],["Three of a Kind",3],["Straight",4],["Flush",6],["Full House",9],["Four of a Kind",25],["Straight Flush",50],["Royal Flush",800]],l:"23456789tjqka".split(""),N:["s","h","c","d"],v:{s:"black",c:"black",h:"red",d:"red"},M:{as:"\ud83c\udca1",ah:"\ud83c\udcb1",ad:"\ud83c\udcc1",ac:"\ud83c\udcd1","2s":"\ud83c\udca2","2h":"\ud83c\udcb2","2d":"\ud83c\udcc2","2c":"\ud83c\udcd2","3s":"\ud83c\udca3","3h":"\ud83c\udcb3","3d":"\ud83c\udcc3",
"3c":"\ud83c\udcd3","4s":"\ud83c\udca4","4h":"\ud83c\udcb4","4d":"\ud83c\udcc4","4c":"\ud83c\udcd4","5s":"\ud83c\udca5","5h":"\ud83c\udcb5","5d":"\ud83c\udcc5","5c":"\ud83c\udcd5","6s":"\ud83c\udca6","6h":"\ud83c\udcb6","6d":"\ud83c\udcc6","6c":"\ud83c\udcd6","7s":"\ud83c\udca7","7h":"\ud83c\udcb7","7d":"\ud83c\udcc7","7c":"\ud83c\udcd7","8s":"\ud83c\udca8","8h":"\ud83c\udcb8","8d":"\ud83c\udcc8","8c":"\ud83c\udcd8","9s":"\ud83c\udca9","9h":"\ud83c\udcb9","9d":"\ud83c\udcc9","9c":"\ud83c\udcd9",ts:"\ud83c\udcaa",
th:"\ud83c\udcba",td:"\ud83c\udcca",tc:"\ud83c\udcda",js:"\ud83c\udcab",jh:"\ud83c\udcbb",jd:"\ud83c\udccb",jc:"\ud83c\udcdb",qs:"\ud83c\udcad",qh:"\ud83c\udcbd",qd:"\ud83c\udccd",qc:"\ud83c\udcdd",ks:"\ud83c\udcae",kh:"\ud83c\udcbe",kd:"\ud83c\udcce",kc:"\ud83c\udcde"}}};const p=m(),r=q(),[t,u]=p.A(),v=Math.round(.3*u),x=w();p.add(x);const z=y(v/3);p.add(z);const A=y(v/1.5);p.add(A);let B=100,C,D,E;r.subscribe(F);G();function G(){E=!1;D=[];--B;C=H();const b=C.j(5);x.K(b);z.a(`Balance: ${B}`);A.a("")}function I(){E=!0;const b=x.C(),[d,e]=J(b);B+=e;console.log(d,e,B);z.a(`Balance: ${B}`);e?A.a(`${d}, win ${e}`):A.a("Better luck next time")}function K(b){-1===D.indexOf(b)&&(D.push(b),x.I(b))}
function F(b){if(b.F&&0<b.g&&6>b.g)K(b.g-1);else if(b.G)if(E)G();else{if(D.length){const d=C.j(D.length);b=D.map((e,c)=>[e,d[c]]);x.H(b)}I()}};function q(){let b={},d=[];window.addEventListener("keyup",function(e){const c=Number(e.key),a={};" "===e.key?a.G=!0:"+"===e.key?a.P=!0:"-"===e.key?a.O=!0:Number.isInteger(c)?(a.g=c,a.F=!0):a[`is${e.key}`]=!0;d.forEach(h=>b[h]&&b[h](a))});return{subscribe:function(e){const c=Date.now();b[c]=e;d=Object.keys(b);return function(){delete b[c];d=Object.keys(b)}},reset:function(){b={};d=[]}}};function m(){function b(g){d(g);a.clearRect(0,0,c.width,c.height);e();requestAnimationFrame(b)}function d(g){f.forEach(k=>k.update(g))}function e(){h.forEach(g=>g.b())}const c=document.querySelector("canvas"),a=c.getContext("2d");let h=[],f=[];c.width=window.innerWidth;c.height=window.innerHeight;a.textAlign="center";a.textBaseline="middle";a.lineJoin="round";requestAnimationFrame(b);return{A:function(){return[c.width,c.height]},add:function(g){g.f(a);h.push(g);"function"===typeof g.update&&f.push(g)},
reset:function(){h=[];f=[]}}};function H(){const {N:b,l:d}=l(),e=b.reduce((c,a)=>{const h=d.map(f=>{{const {M:g,l:k,v:n}=l();f={i:f,o:a,value:k.indexOf(f),L:g[f+a],color:n[a]}}return f});return[...c,...h]},[]);for(let c=e.length-1;0<c;c--){const a=Math.floor(Math.random()*(c+1));[e[c],e[a]]=[e[a],e[c]]}return{j:function(c){return e.splice(-1*c)}}};function J(b){const {D:d}=l(),e=[...b].sort(function(g,k){return g.value<k.value?1:g.value>k.value?-1:0});let c=!0,a=!0;const h=e.reduce((g,k,n)=>{c&&0!==n&&(c=k.value===e[n-1].value-1);a&&0!==n&&(a=k.o===e[n-1].o);g[k.i]?g[k.i].push(k):g[k.i]=[k];return g},{});b=d[0];var f=a&&c;f&&h.u&&1===h.u.length?b=d[9]:f?b=d[8]:a?b=d[5]:c?b=d[4]:(f=Object.keys(h).reduce((g,k)=>{g[h[k].length].push(h[k]);return g},{1:[],2:[],3:[],4:[]}),1===f["4"].length?b=d[7]:1===f["2"].length&&1===f["3"].length?b=d[6]:1===
f["3"].length?b=d[3]:2===f["2"].length?b=d[2]:1===f["2"].length&&f["2"][0].every(g=>8<g.value)&&(b=d[1]));return b};function w(){let b,d=[];const e=Math.round(.06*v),c=Math.round(.66*v);return{f:function(a){b=a},b:function(){d.forEach(a=>a.b())},I:function(a){d[a].m(!0)},H:function(a){a.forEach(([h,f])=>{d[h].J(f);d[h].m(!1)})},C:function(){return d.map(a=>a.B())},K:function(a){const h=(t-(e+a.length*(c+e)))/2;d=a.map((f,g)=>L(f,h+g*(c+e),c,e));d.forEach(f=>f.f(b))}}};function L(b,d,e,c){let a,h;return{b:function(){a.save();a.fillStyle="white";a.fillRect(d,v,e,v-c/2);a.font=`${v}px sans-serif`;a.textBaseline="top";a.textAlign="left";a.fillStyle=h?"grey":b.color;a.fillText(h?"\ud83c\udcbf":b.L,d,v+c);a.restore()},f:function(f){a=f},m:function(f){h=f},J:function(f){b=f},B:function(){return b}}};function y(b){var d="",e=t/2,c={fill:"white",fontSize:42};let a;const h=c.fontSize,f=c.fill,g=c.stroke;return{b:function(){a.save();a.font=`${h}px sans-serif`;a.fillStyle=f;a.fillText(d,e,b);g&&(a.strokeStyle=g,a.strokeText(d,e,b));a.restore()},f:function(k){a=k},a:function(k){d=k}}};
